---
_format_version: '3.0'
patches:
- selectors:
  - "$..services[0]"
  values:
    name: ${{ env "DECK_API_NAME" }}-${{ env "DECK_API_VERSION" }}
    url: ${{ env "DECK_API_URL" }}
    enabled: ${{ env "DECK_SERVICE_ENABLED" }}
  remove:
    - host
    - port
    - path
    - protocol
- selectors:
  - "$..services[0].plugins[?(@.name == 'openid-connect')].config"
  values:
    issuer: ${{ env "DECK_CONFIG_OIDC_ISSUER"}}
